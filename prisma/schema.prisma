generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mysql"
}

model User {
  id        Int        @id @default(autoincrement())
  name      String     @db.VarChar(100)
  email     String     @unique @db.VarChar(100)
  password  String     @db.VarChar(200)
  movements Movement[]
  role      UserRole   @default(USER)

  @@map("users")
}

enum UserRole {
  USER
  ADMIN
}

model Category {
  id        Int        @id @default(autoincrement())
  movements Movement[]
  name      String     @db.VarChar(200)

  @@map("categories")
}

model Movement {
  id          Int          @id @default(autoincrement())
  category    Category?    @relation(fields: [categoryId], references: [id], onDelete: SetNull)
  categoryId  Int?
  user        User?        @relation(fields: [userId], references: [id], onDelete: SetNull)
  userId      Int?
  type        MovementType
  description String?      @db.Text
  value       Decimal      @db.Decimal(10, 2)
  date        DateTime @default(now())

  @@map("movements")
}

enum MovementType {
  INCOME
  EXPENSE
}
